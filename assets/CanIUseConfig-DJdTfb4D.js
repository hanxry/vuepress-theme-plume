import{z as U,h as G,g as h,A as J,B as q,C as V,D as P,s as g,E as j,G as Q,k as W,H as B,I as X,r as F,c as d,o as r,e as s,j as M,l as S,u as e,t as _,J as L,K as Y,F as k,i as x,L as Z,M as ee,N as D,O as T,d as te,a as ae}from"./app-CW5jz0RM.js";import{_ as se}from"./CodeViewer.vue_vue_type_style_index_0_lang-DxzDNm1h.js";const ne="https://caniuse.pengzhanbo.cn/features.json",I={"/":{past0:"不显示旧版本",pastIndex:"旧版本（当前版本 - {index}）",future0:"不显示未来版本",futureIndex:"未来版本（当前版本 + {index}）"},"/en/":{past0:"Do not show old versions",pastIndex:"Old version (current version - {index})",future0:"Do not show future versions",futureIndex:"Future version (current version + {index})"}},ue=[{label:"iframe",value:""},{label:"image",value:"image"}];function le(){const t=j(),o=h("2"),u=h("1"),v=h(""),l=g(()=>[{label:I[t.value].past0||"",value:"0"},...Array.from({length:5}).fill(0).map((i,c)=>({label:I[t.value]?.pastIndex?.replace("{index}",`${c+1}`)??"",value:`${c+1}`}))]),p=g(()=>[{label:I[t.value].future0||"",value:"0"},...Array.from({length:3}).fill(0).map((i,c)=>({label:I[t.value]?.futureIndex?.replace("{index}",`${c+1}`)??"",value:`${c+1}`}))]),a=Q(ue);return{past:o,future:u,pastList:l,futureList:p,embedType:v,embedTypeList:a}}function oe(t,o){const u=U("plume:caniuse-feature-list",[]),v=U("plume:caniuse-feature-list-updated",Date.now()),l=1e3*60*60*24*3;G(async()=>{if(typeof document>"u"||u.value.length&&Date.now()-v.value<l)return;const m=await fetch(ne).then(b=>b.json());u.value=m||u.value||[]});const p=h(""),a=h(!1),i=h(),c=h(null);J(()=>[u.value,a.value],()=>{a.value||(i.value=u.value)},{immediate:!0}),q(o,()=>{a.value=!1},{ignore:[t]}),V(t,"input",P(()=>{c.value=null,p.value=t.value?.value||"",p.value?(i.value=u.value.filter(m=>m.label.includes(p.value)||m.value.includes(p.value)),i.value.length===1&&(c.value=i.value[0])):i.value=u.value},500)),V(t,"focus",()=>{a.value=!0});function w(m){c.value=m,a.value=!1,t.value&&(t.value.value=m.label)}return{featureList:i,isFocus:a,onSelect:w,feature:g(()=>c.value?.value||"")}}function re({feature:t,embedType:o,past:u,future:v}){const l=g(()=>{let a="@[caniuse";return o.value&&(a+=` ${o.value}`),(u.value!=="-2"||v.value!=="1")&&(u.value==="0"&&v.value==="0"?a+="{0}":a+=`{-${u.value},${v.value}}`),a+="](",t.value&&(a+=t.value),`${a})`}),p=g(()=>!t.value||!o.value?"":ie(t.value));return{output:l,rendered:p}}function ie(t){const o="https://caniuse.bitsofco.de/image/",u=`Data on support for the ${t} feature across the major browsers from caniuse.com`;return`<p><picture>
    <source type="image/webp" srcset="${o}${t}.webp">
    <source type="image/png" srcset="${o}${t}.png">
    <img src="${o}${t}.jpg" alt="${u}" width="100%">
  </picture></p>`}const ce={class:"caniuse-config-wrapper"},de=["for"],ve={class:"feature-input"},pe=["id","placeholder"],fe=["onClick","onKeydown"],me={class:"caniuse-form-item"},_e={class:"caniuse-embed-type"},be=["for"],he=["id","value"],ye={key:0,class:"caniuse-form-item"},ge={class:"caniuse-browser-version"},$e=["for"],we=["id"],Ce=["value"],Le=["for"],ke=["id"],xe=["value"],Ie={class:"caniuse-output"},Se=["innerHTML"],De=W({__name:"CanIUseConfig",setup(t){const o={"/":{"select-feature":"选择特性：",placeholder:"输入特性","embed-type":"嵌入方式：",output:"输出：","browser-version":"浏览器版本：","no-recommend":"不推荐"},"/en/":{"select-feature":"Select feature:",placeholder:"Input feature","embed-type":"Embed type: ",output:"Output:","browser-version":"Browser version: ","no-recommend":"Not recommended"}},u=B(null),v=B(null),l=X(),p=j(),a=g(()=>o[p.value]),{feature:i,featureList:c,onSelect:w,isFocus:m}=oe(v,u),{past:b,pastList:A,future:$,futureList:N,embedType:y,embedTypeList:O}=le(),{output:E,rendered:K}=re({feature:i,embedType:y,past:b,future:$});return(Ue,f)=>{const R=F("Badge"),H=F("CanIUseViewer");return r(),d("div",ce,[s("form",null,[s("label",{class:"caniuse-form-item",for:`caniuse-feature-input-${e(l)}`},[s("span",null,_(a.value["select-feature"]),1),s("div",ve,[s("input",{id:`caniuse-feature-input-${e(l)}`,ref_key:"inputEl",ref:v,class:"feature-input__input",type:"text",name:"feature",placeholder:a.value.placeholder},null,8,pe),f[3]||(f[3]=s("span",{class:"vpi-chevron-down"},null,-1)),L(s("ul",{ref_key:"listEl",ref:u,class:"feature-list"},[(r(!0),d(k,null,x(e(c),n=>(r(),d("li",{key:n.value},[s("button",{type:"button",class:"feature-list-item",onClick:C=>e(w)(n),onKeydown:Z(C=>e(w)(n),["enter"])},_(n.label),41,fe)]))),128))],512),[[Y,e(m)]])])],8,de),s("div",me,[s("span",null,_(a.value["embed-type"]),1),s("div",_e,[(r(!0),d(k,null,x(e(O),(n,C)=>(r(),d("label",{key:n.label,for:`caniuse-embed-${e(l)}-${C}`},[L(s("input",{id:`caniuse-embed-${e(l)}-${C}`,"onUpdate:modelValue":f[0]||(f[0]=z=>D(y)?y.value=z:null),type:"radio",name:"embedType",value:n.value},null,8,he),[[ee,e(y)]]),s("span",null,_(n.label),1),n.value==="image"?(r(),M(R,{key:0,type:"warning",text:a.value["no-recommend"]},null,8,["text"])):S("",!0)],8,be))),128))])]),e(y)?S("",!0):(r(),d("div",ye,[s("span",null,_(a.value["browser-version"]),1),s("div",ge,[s("label",{for:`caniuse-past-${e(l)}`},[L(s("select",{id:`caniuse-past-${e(l)}`,"onUpdate:modelValue":f[1]||(f[1]=n=>D(b)?b.value=n:null),name:"past"},[(r(!0),d(k,null,x(e(A),n=>(r(),d("option",{key:n.value,value:n.value},_(n.label),9,Ce))),128))],8,we),[[T,e(b)]])],8,$e),f[4]||(f[4]=s("span",null,"-",-1)),s("label",{for:`caniuse-future-${e(l)}`},[L(s("select",{id:`caniuse-future-${e(l)}`,"onUpdate:modelValue":f[2]||(f[2]=n=>D($)?$.value=n:null),name:"future"},[(r(!0),d(k,null,x(e(N),n=>(r(),d("option",{key:n.value,value:n.value},_(n.label),9,xe))),128))],8,ke),[[T,e($)]])],8,Le)])]))]),s("div",Ie,[s("h4",null,_(a.value.output),1),te(se,{lang:"md",content:e(E)},null,8,["content"])]),e(y)==="image"?(r(),d("div",{key:0,innerHTML:e(K)},null,8,Se)):e(i)?(r(),M(H,{key:1,feature:e(i),past:e(b),future:e($)},null,8,["feature","past","future"])):S("",!0)])}}}),Fe=ae(De,[["__scopeId","data-v-05fa4a97"]]);export{Fe as C};
